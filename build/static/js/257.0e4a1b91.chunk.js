"use strict";(self.webpackChunkrestaurant_management=self.webpackChunkrestaurant_management||[]).push([[257],{4400:function(e,t,r){r.d(t,{S2:function(){return d},C5:function(){return u},Ks:function(){return l},Rd:function(){return o},dF:function(){return c}});var n=r(4165),a=r(5861),i=r(9655),s=r(1243).Z.create({baseURL:"https://codx-json-server.vercel.app"}),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("/api/tables");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),i.Am.error("Somthing Wrong!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("/api/tables/"+t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),i.Am.error("Somthing Wrong!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("/api/tables?status=Available");case 3:return r=e.sent,a=r.data.filter((function(e){return e.seating_capacity>=t})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),i.Am.error("Somthing Wrong!");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("/api/tables?status=Booked");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),i.Am.error("Somthing Wrong!");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.data,e.prev=1,e.next=4,s.patch("/api/tables/"+r,a,{headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return u=e.sent,e.abrupt("return",u.data);case 8:e.prev=8,e.t0=e.catch(1),i.Am.error("Somthing Wrong!");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},3257:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(2791),a=r(1413),i=r(1134),s=r(7391),u=r(8096),o=r(4925),l=r(9321),c=r(9891),d=r(6151),h=r(7689),Z=r(4400),v=r(1353),p=r(3713),b=r(9778),f=r(8556),m=r(2841),x=r(9655),g=r(184),k=function(){var e=(0,n.useContext)(v.e).IsAuth,t=(0,h.s0)(),r=(0,i.cI)(),k=r.register,j=r.handleSubmit,M=r.formState.errors,w=(0,p.NL)(),y=(0,b.a)({queryKey:["booking"],queryFn:Z.C5}),P=y.isLoading,S=y.data,C=(0,f.D)({mutationFn:Z.S2,onSuccess:function(){w.invalidateQueries(["booking"]),x.Am.success("Table Booked")}}).mutateAsync,A=(0,f.D)({mutationFn:Z.Ks,onSuccess:function(e){w.setQueriesData(["booking"],e)}}),q=A.mutateAsync,F=S||[];if(P)return(0,g.jsx)(m.Z,{});return(0,g.jsx)("div",{className:"BookingForm",children:(0,g.jsxs)("form",{action:"",method:"post",onSubmit:j((function(r){if(e){var n=(new Date).toISOString().slice(0,10),a={reservation:{Order:"Ak"+Math.random().toString(16).slice(2),Table:r.table,name:r.name,email:r.email,mobile:r.mobile,checkIn:r.checkin,time:r.time,guest:r.guest,booked:n},status:"Booked"};C({id:r.table,data:a}),t("/orders")}else x.Am.success("Login Now"),t("/login")})),children:[(0,g.jsx)(s.Z,(0,a.Z)((0,a.Z)({},k("name",{required:"Name Field Required"})),{},{type:"text",label:"Name",color:"success",autoComplete:"true",error:!!M.name,variant:"outlined"})),(0,g.jsx)(s.Z,(0,a.Z)((0,a.Z)({},k("email",{required:"Email Field Required"})),{},{type:"email",label:"Email",autoComplete:"true",error:!!M.email,color:"success",variant:"outlined"})),(0,g.jsx)(s.Z,(0,a.Z)((0,a.Z)({},k("mobile",{required:"Mobile Field Required",pattern:{value:/^6[0-9]{8}$/,message:"Invalid Cameroonian phone number. Must start with 6 and have 9 digits."}})),{},{type:"number",autoComplete:"true",error:!!M.mobile,label:"Mobile",color:"success",variant:"outlined"})),(0,g.jsx)(s.Z,(0,a.Z)((0,a.Z)({},k("checkin",{required:"Check-in Field Required"})),{},{onFocus:function(e){return e.target.type="date"},type:"text",autoComplete:"true",error:!!M.checkin,label:"Check-In",color:"success",variant:"outlined"})),(0,g.jsxs)(u.Z,{sx:{width:"330px"},children:[(0,g.jsx)(o.Z,{color:"success",id:"time-label",children:"Time"}),(0,g.jsxs)(l.Z,(0,a.Z)((0,a.Z)({},k("time",{required:"time Field Required"})),{},{labelId:"time-label",label:"Time",error:!!M.time,color:"success",defaultValue:"",children:[(0,g.jsx)(c.Z,{disabled:!0,value:""}),(0,g.jsx)(c.Z,{value:"8 AM - 10 AM",children:"08 AM - 10 AM"}),(0,g.jsx)(c.Z,{value:"10 AM - 12 PM",children:"10 AM - 12 PM"}),(0,g.jsx)(c.Z,{value:"12 PM - 2 PM",children:"12 PM - 02 PM"}),(0,g.jsx)(c.Z,{value:"2 PM - 4 PM",children:"02 PM - 04 PM"}),(0,g.jsx)(c.Z,{value:"4 PM - 6 PM",children:"04 PM - 06 PM"}),(0,g.jsx)(c.Z,{value:"6 PM - 8 PM",children:"06 PM - 08 PM"})]}))]}),(0,g.jsxs)(u.Z,{sx:{width:"330px"},children:[(0,g.jsx)(o.Z,{color:"success",id:"guest-label",children:"Guest"}),(0,g.jsxs)(l.Z,(0,a.Z)((0,a.Z)({},k("guest",{required:"guest Field Required"})),{},{labelId:"guest-label",label:"Guest",error:!!M.guest,color:"success",onChange:function(e){q(e.target.value)},defaultValue:"",children:[(0,g.jsx)(c.Z,{disabled:!0,value:""}),(0,g.jsx)(c.Z,{value:"1",children:"1 Person"}),(0,g.jsx)(c.Z,{value:"2",children:"2 Person"}),(0,g.jsx)(c.Z,{value:"3",children:"3 Person"}),(0,g.jsx)(c.Z,{value:"4",children:"4 Person"}),(0,g.jsx)(c.Z,{value:"5",children:"5 Person"})]}))]}),(0,g.jsxs)(u.Z,{sx:{width:"330px"},children:[(0,g.jsx)(o.Z,{color:"success",id:"table-label",children:"Table"}),(0,g.jsxs)(l.Z,(0,a.Z)((0,a.Z)({},k("table",{required:"Table Field Required"})),{},{labelId:"table-label",label:"Table",error:!!M.table,color:"success",defaultValue:"",children:[(0,g.jsx)(c.Z,{disabled:!0,value:""}),F&&F.map((function(e,t){return(0,g.jsx)(c.Z,{value:e.table_no,children:e.table_no},t)}))]}))]}),(0,g.jsx)(d.Z,{type:"submit",variant:"contained",children:"Book Table Now"})]})})},j=r(4554),M=r(890),w=function(){return(0,g.jsxs)(j.Z,{className:"BookingPage",children:[(0,g.jsx)(M.Z,{className:"first-title",variant:"h6",children:"Booking"}),(0,g.jsx)(M.Z,{className:"second-title",variant:"h4",children:"A Culinary Journey Awaits!"}),(0,g.jsx)(k,{})]})}},8556:function(e,t,r){r.d(t,{D:function(){return F}});var n,a,i,s,u,o,l=r(1413),c=r(9439),d=r(2791),h=r(5671),Z=r(3144),v=r(7326),p=r(136),b=r(7277),f=r(101),m=r(2346),x=r(6033),g=r(3889),k=r(3092),j=r(2756),M=r(7211),w=r(8974),y=r(5391),P=(n=new WeakMap,a=new WeakMap,i=new WeakMap,s=new WeakMap,u=new WeakSet,o=new WeakSet,function(e){(0,p.Z)(r,e);var t=(0,b.Z)(r);function r(e,l){var c;return(0,h.Z)(this,r),c=t.call(this),(0,f.Z)((0,v.Z)(c),o),(0,f.Z)((0,v.Z)(c),u),(0,m.Z)((0,v.Z)(c),n,{writable:!0,value:void 0}),(0,m.Z)((0,v.Z)(c),a,{writable:!0,value:void 0}),(0,m.Z)((0,v.Z)(c),i,{writable:!0,value:void 0}),(0,m.Z)((0,v.Z)(c),s,{writable:!0,value:void 0}),(0,k.Z)((0,v.Z)(c),a,void 0),(0,k.Z)((0,v.Z)(c),n,e),c.setOptions(l),c.bindMethods(),(0,g.Z)((0,v.Z)(c),u,S).call((0,v.Z)(c)),c}return(0,Z.Z)(r,[{key:"bindMethods",value:function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}},{key:"setOptions",value:function(e){var t,r=this.options;this.options=(0,x.Z)(this,n).defaultMutationOptions(e),(0,y.VS)(r,this.options)||(0,x.Z)(this,n).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,x.Z)(this,i),observer:this}),null===(t=(0,x.Z)(this,i))||void 0===t||t.setOptions(this.options)}},{key:"onUnsubscribe",value:function(){var e;this.hasListeners()||(null===(e=(0,x.Z)(this,i))||void 0===e||e.removeObserver(this))}},{key:"onMutationUpdate",value:function(e){(0,g.Z)(this,u,S).call(this),(0,g.Z)(this,o,C).call(this,e)}},{key:"getCurrentResult",value:function(){return(0,x.Z)(this,a)}},{key:"reset",value:function(){(0,k.Z)(this,i,void 0),(0,g.Z)(this,u,S).call(this),(0,g.Z)(this,o,C).call(this)}},{key:"mutate",value:function(e,t){var r;return(0,k.Z)(this,s,t),null===(r=(0,x.Z)(this,i))||void 0===r||r.removeObserver(this),(0,k.Z)(this,i,(0,x.Z)(this,n).getMutationCache().build((0,x.Z)(this,n),this.options)),(0,x.Z)(this,i).addObserver(this),(0,x.Z)(this,i).execute(e)}}]),r}(w.l));function S(){var e,t,r=null!==(e=null===(t=(0,x.Z)(this,i))||void 0===t?void 0:t.state)&&void 0!==e?e:(0,j.R)();(0,k.Z)(this,a,(0,l.Z)((0,l.Z)({},r),{},{isPending:"pending"===r.status,isSuccess:"success"===r.status,isError:"error"===r.status,isIdle:"idle"===r.status,mutate:this.mutate,reset:this.reset}))}function C(e){var t=this;M.V.batch((function(){var r,n,i,u;if((0,x.Z)(t,s)&&t.hasListeners())if("success"===(null===e||void 0===e?void 0:e.type))null===(r=(n=(0,x.Z)(t,s)).onSuccess)||void 0===r||r.call(n,e.data,(0,x.Z)(t,a).variables,(0,x.Z)(t,a).context),null===(i=(u=(0,x.Z)(t,s)).onSettled)||void 0===i||i.call(u,e.data,null,(0,x.Z)(t,a).variables,(0,x.Z)(t,a).context);else if("error"===(null===e||void 0===e?void 0:e.type)){var o,l,c,d;null===(o=(l=(0,x.Z)(t,s)).onError)||void 0===o||o.call(l,e.error,(0,x.Z)(t,a).variables,(0,x.Z)(t,a).context),null===(c=(d=(0,x.Z)(t,s)).onSettled)||void 0===c||c.call(d,void 0,e.error,(0,x.Z)(t,a).variables,(0,x.Z)(t,a).context)}t.listeners.forEach((function(e){e((0,x.Z)(t,a))}))}))}var A=r(3713),q=r(8981);function F(e,t){var r=(0,A.NL)(t),n=d.useState((function(){return new P(r,e)})),a=(0,c.Z)(n,1)[0];d.useEffect((function(){a.setOptions(e)}),[a,e]);var i=d.useSyncExternalStore(d.useCallback((function(e){return a.subscribe(M.V.batchCalls(e))}),[a]),(function(){return a.getCurrentResult()}),(function(){return a.getCurrentResult()})),s=d.useCallback((function(e,t){a.mutate(e,t).catch(R)}),[a]);if(i.error&&(0,q.L)(a.options.throwOnError,[i.error]))throw i.error;return(0,l.Z)((0,l.Z)({},i),{},{mutate:s,mutateAsync:i.mutate})}function R(){}}}]);
//# sourceMappingURL=257.0e4a1b91.chunk.js.map